<app-nav-bar></app-nav-bar>
<div class="container rounded-2 overflow-hidden">
  <DIV CLASS="row title-row bg-primary-subtle">
    <DIV CLASS="col col-2">User</DIV>
    <DIV CLASS="col col-2">Context</DIV>
    <DIV CLASS="col col-lg-2 d-none d-lg-block">Activity permitted</DIV>
    <DIV CLASS="col col-1 col-sm-1 d-lg-none">OK?</DIV>
    <DIV CLASS="col col-7 col-sm-7 col-md-6 col-lg-6">Comments</DIV>
  </DIV>
  <DIV CLASS="row bg-secondary-subtle">
    <DIV CLASS="col col-2">{{ userAdmin.user_status?.user_id }}</DIV>
    <DIV CLASS="col col-2">{{ userAdmin.user_status?.context_label }}</DIV>
    <DIV CLASS="col col-1 col-md-1 col-sm-1 col-lg-2">
      <div *ngIf="userAdmin.user_status?.activity_permitted">
        <I class="fas fa-check active"></I>
      </div>
      <div *ngIf="! userAdmin.user_status?.activity_permitted">
        <I class="fas fa-times inactive"></I>
      </div>
    </DIV>
    <DIV CLASS="col col-7 col-lg-6">
      <ul>
        <li *ngFor="let reason of userAdmin.user_status?.reasons">
          {{ reason }}
        </li>
      </ul>
    </DIV>
  </DIV>
</div>

<!-- seperator -->
<div class="container p-2">
</div>

<div class="container rounded-2 overflow-hidden">
  <div class="accordion" id="adminDetailAccordion">
      <DIV CLASS="row title-row bg-primary-subtle">
        <DIV CLASS="col col-2 ">Day</DIV>
        <DIV CLASS="col col-2 ">Context</DIV>
        <DIV CLASS="col col-2 ">Min Time of Day</DIV>
        <DIV CLASS="col col-2 ">Max Time of Day</DIV>
        <DIV CLASS="col col-1 ">Time per Day</DIV>
        <DIV CLASS="col col-1 ">Minimum Break</DIV>
        <DIV CLASS="col col-1 ">Max Duration</DIV>
        <DIV CLASS="col col-1 ">Free Play</DIV>
      </DIV>
      <div *ngFor="let detail of userAdmin.user_admin_details; index as i" class="accordion-item">
         <div class="accordion-header">
            <DIV CLASS="row bg-secondary-subtle">
              <DIV CLASS="col col-2">
                <A data-bs-toggle="collapse" href="#adminDetailAccordionItem{{i}}" aria-expanded="false" 
                  attr.aria-controls="adminDetailAccordionItem{{i}}" role="button" title="Open details">
                  {{ detail.date_in_long_format() }}
                </A>
              </DIV>
              <DIV CLASS="col col-2">
                {{ detail.effective_rule_set?.label }}
              </DIV>
              <DIV CLASS="col col-2" [ngClass]="{'rule-override': detail.override?.min_time_of_day_in_iso_8601 }">
                {{ detail.effective_rule_set?.min_time_of_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-2" [ngClass]="{'rule-override': detail.override?.max_time_of_day_in_iso_8601 }">
                {{ detail.effective_rule_set?.max_time_of_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-1" [ngClass]="{'rule-override': detail.override?.max_time_per_day_in_seconds }">
                {{ detail.effective_rule_set?.max_time_per_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-1" [ngClass]="{'rule-override': detail.override?.min_break_in_seconds }">
                {{ detail.effective_rule_set?.min_break_as_string() }}
              </DIV>
              <DIV CLASS="col col-1" [ngClass]="{'rule-override': detail.override?.max_activity_duration_in_seconds }">
                {{ detail.effective_rule_set?.max_activity_duration_as_string() }}
              </DIV>
              <DIV CLASS="col col-1" [ngClass]="{'rule-override': detail.override?.free_play }">
                {{ detail.effective_rule_set?.free_play }}
              </DIV>
            </DIV>
          </div>
          <div id="adminDetailAccordionItem{{i}}" class="accordion-collapse collapse"
               [class.show] = "getAccordionState('adminDetailAccordionItem' + i)"
               data-bs-parent="#adminDetailAccordion">
            <DIV CLASS="row bg-warning-subtle">
              <DIV CLASS="col col-2">
              </DIV>
              <DIV CLASS="col col-2">
                {{ detail.rule_set?.label }}
              </DIV>
              <DIV CLASS="col col-2">
                {{ detail.rule_set?.min_time_of_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-2">
                {{ detail.rule_set?.max_time_of_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.rule_set?.max_time_per_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.rule_set?.min_break_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.rule_set?.max_activity_duration_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.rule_set?.free_play }}
              </DIV>
            </DIV>
            <DIV CLASS="row bg-warning-subtle">
              <DIV CLASS="col col-2">
              </DIV>
              <DIV CLASS="col col-2">
                override
              </DIV>
              <DIV CLASS="col col-2">
                {{ detail.override?.min_time_of_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-2">
                {{ detail.override?.max_time_of_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.override?.max_time_per_day_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.override?.min_break_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.override?.max_activity_duration_as_string() }}
              </DIV>
              <DIV CLASS="col col-1">
                {{ detail.override?.free_play }}
              </DIV>
            </DIV>

          </div>
      </div>
   </div>
</div>
