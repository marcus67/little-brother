<app-nav-bar></app-nav-bar>
<div class="container rounded-2 overflow-hidden">
  <DIV CLASS="row title-row bg-primary-subtle">
    <DIV CLASS="col col-2 col-lg-1 localetext">User</DIV>
    <DIV CLASS="col col-2 col-lg-1 localetext">Context</DIV>
    <DIV CLASS="col col-2 col-lg-1 localetext">
      Today's Activity
      <div *ngIf="hasDowntime; then todayHasDowntime"></div>
        <ng-template #todayHasDowntime><DIV CLASS="downtime">Downtime</DIV></ng-template>
    </DIV>

    <DIV CLASS="col col-2 col-lg-1  localetext">Previous Activity Start Time</DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">Previous Activity End Time</DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">Current Activity Start Time</DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">
      Current Activity Duration
      <div *ngIf="hasDowntime; then currentActivityHasDowntime"></div>
        <ng-template #currentActivityHasDowntime><DIV CLASS="downtime">Downtime</DIV></ng-template>
    </DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">Activity permitted</DIV>
    <DIV CLASS="col col-2 col-lg-4 localetext">Reasons</DIV>
  </DIV>
  <DIV *ngFor="let entry of userStatus" CLASS="row title-row bg-secondary-subtle" >
    <DIV CLASS="col col-2 col-lg-1 localetext"><a [routerLink]="['/status', entry.user_id]">{{ entry.full_name }}</a></DIV>
    <DIV CLASS="col col-2 col-lg-1 localetext">{{ entry.context_label }}</DIV>
    <DIV CLASS="col col-2 col-lg-1 localetext">
      {{ entry.todays_activity_duration() }} /
      <div *ngIf="entry.free_play; then freePlay else noFreePlay"></div>
        <ng-template #freePlay>unlimited</ng-template>
        <ng-template #noFreePlay>{{ entry.max_time_per_day() }}</ng-template>
      <div *ngIf="entry.todays_downtime_in_seconds; then downtime"></div>
        <ng-template #downtime><DIV CLASS="downtime"> {{ entry.todays_downtime() }}</DIV></ng-template>
    </DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">{{ entry.previous_activity_start_time_as_string() }}</DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">{{ entry.previous_activity_end_time_as_string() }}</DIV>
    <DIV CLASS="col col-2 col-lg-1  localetext">{{ entry.current_activity_start_time_as_string() }}</DIV>
    <DIV CLASS="col col-2 col-lg-1 localetext">
      <div [ngClass] = "{'blink': entry.current_activity_duration_in_seconds }">{{ entry.current_activity_duration() }}</div>
      <div *ngIf="entry.current_activity_downtime_in_seconds; then currentDowntime"></div>
          <ng-template #currentDowntime><DIV CLASS="downtime"> {{ entry.current_activity_downtime() }}</DIV></ng-template>
    </DIV>
    <DIV CLASS="col col-2 col-lg-1 localetext">
      <div *ngIf="entry.activity_permitted">
        <I class="fas fa-check active"></I>
      </div>
      <div *ngIf="! entry.activity_permitted">
        <I class="fas fa-times inactive"></I>
      </div>
    </DIV>
    <DIV CLASS="col col-2 col-lg-4 localetext">
      <ul>
        <li *ngFor="let reason of entry.reasons">
          {{ reason }}
        </li>
      </ul>
    </DIV>
  </DIV>
</div>
